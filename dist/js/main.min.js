(()=>{"use strict";const t=document.querySelector(".projects-slider__slider");new class{constructor(t,e){this.sliderEl=t,this.prefix=e,this.slides=document.querySelector(".slides"),this.dots=null,this.nowOffset=0,this.steps=1,this.slideWidth=this.slides.children[0].getBoundingClientRect().width,this.countSteps(),this.initDots(this.steps),this.initArrows()}initDots(t){const e=this.sliderEl.querySelector(".dots");if(e){this.dots=[];for(let s=0;s<t;++s){const t=document.createElement("div");t.classList.add(this.prefix+"__dot"),e.appendChild(t),t.addEventListener("click",(t=>{const e=s-this.nowOffset;this.changeOffset(e)})),this.dots.push(t)}this.colorizeDots()}}initArrows(){const t=this.sliderEl.querySelector(".back"),e=this.sliderEl.querySelector(".next");t.addEventListener("click",(t=>{this.changeOffset(-1)})),e.addEventListener("click",(t=>{this.changeOffset(1)}))}changeOffset(t){this.nowOffset=this.nowOffset+t,this.nowOffset=this.nowOffset<0?this.steps-1:this.nowOffset;const e=this.nowOffset%this.steps;this.slides.style.transform=`translate(${-e*this.slideWidth}px, 0)`,this.dots&&this.colorizeDots()}colorizeDots(){this.dots.forEach(((t,e)=>{e===this.nowOffset%this.steps?t.classList.add("active"):t.classList.remove("active")}))}countSteps(){const t=this.slides.getBoundingClientRect().width,e=Math.floor(t/this.slideWidth),s=(this.slideWidth*this.slides.children.length-e*this.slideWidth)/this.slideWidth;this.steps=s<0?1:s+1}}(t,"projects-slider"),function(t=document){const e=t.getElementsByTagName("textarea"),s=["input","keyup","paste"];function i(t){t.style.height="auto",t.style.height=t.scrollHeight+"px"}Array.from(e).forEach((t=>{i(t),s.forEach((e=>{t.addEventListener(e,(t=>i(t.target)))}))}))}(document.querySelector(".form-form")),new class{errors={0:"Заполните все обязательные поля",1:"Укажите корректное ФИО",2:"Укажите корректный телефон",3:"Укажите корректный email"};constructor(t){this.formWrapper=t,this.form=t.querySelector(".form-form"),this.incorrect=t.querySelector(".form__incorrect"),this.timeOut=null,this.button=t.querySelector(".button-submit"),this.fields=Array.from(t.querySelectorAll("input")).concat(...t.querySelectorAll("textarea")),this.initValidators(),this.formatPhone(this.fields.find((t=>"phone"===t.name)))}initValidators(){this.button.addEventListener("click",(t=>{t.preventDefault(),this.button.blur();const e=new Set,s=[],i={};for(let t=0;t<this.fields.length;++t){const r=this.fields[t];switch(i[r.name]=r.value,r.name){case"name":r.value.split(" ").length<2&&(e.add(this.errors[1]),s.push(r));break;case"phone":/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/.test(r.value)||(e.add(this.errors[2]),s.push(r)),i[r.name]=r.value.replace(/[^\d]/g,"");break;case"mail":/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(r.value)||(e.add(this.errors[3]),s.push(r));break;case"message":r.value||(e.add(this.errors[0]),s.push(r))}}e.length>0?this.showError(e,s):console.log(i)})),this.fields.forEach((t=>t.addEventListener("click",(()=>t.classList.remove("wrong")))))}formatPhone(t){t.addEventListener("keyup",(e=>{if(8===e.keyCode||46===e.keyCode)return;let s="+7 (";if(!t.value)return void(t.value=s);let i=t.value.replace(/[^\d]/g,""),r=0;"8"!==i[0]&&"7"!==i[0]||(r=1),i.length>=r+3?s+=`${i.slice(r,r+3)}) `:s+=i.slice(r),i.length>=r+6?s+=`${i.slice(r+3,r+6)}-`:s+=i.slice(r+3,r+6),i.length>=r+8?s+=`${i.slice(r+6,r+8)}-`:s+=i.slice(r+6,r+8),i.length>=r+8&&(s+=i.slice(r+8,r+10)),t.value=s}))}showError(t,e){this.timeOut&&clearTimeout(this.timeOut),this.incorrect.innerHTML="",t.forEach((t=>{const e=document.createElement("div");e.innerHTML=t,this.incorrect.appendChild(e)})),this.incorrect.classList.add("visible"),e.forEach((t=>t.classList.add("wrong"))),this.timeOut=setTimeout((()=>{this.incorrect.classList.remove("visible"),this.incorrect.innerHtml=""}),5e3)}}(document.querySelector(".consult-form-wrap"))})();